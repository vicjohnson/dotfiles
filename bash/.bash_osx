#! /usr/bin/env bash


# ---------- Application aliases ----------
alias subl="/Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl"
alias lip="ipconfig getifaddr en0"
alias bi="brew install"
alias bu="brew uninstall"
alias bl="brew list"
alias bs="brew search"

# ---------- Utility aliases ----------
alias afk="/System/Library/CoreServices/Menu\ Extras/User.menu/Contents/Resources/CGSession -suspend"
alias path='echo -e ${PATH//:/\\n}'
alias rmdsstore="find . -type f -name '*.DS_Store' -ls -delete"


# ---------- Set some system preferences that aren't offered normally ----------
# Expand save panel by default
defaults write NSGlobalDomain NSNavPanelExpandedStateForSaveMode -bool true
defaults write NSGlobalDomain NSNavPanelExpandedStateForSaveMode2 -bool true

# Expand print panel by default
defaults write NSGlobalDomain PMPrintingExpandedStateForPrint -bool true
defaults write NSGlobalDomain PMPrintingExpandedStateForPrint2 -bool true

# Save to disk (not to iCloud) by default
defaults write NSGlobalDomain NSDocumentSaveNewDocumentsToCloud -bool false

# ---------- Set shell options ----------
shopt -s cdspell
shopt -s dotglob


# ---------- Set up some ls options ----------
export CLICOLOR=1

# If there is a dircolors config file, check to see if this mac has the GNU
# coreutils library, if it does, then set the dircolors according to the config.
# If GNU coreutils is not installed, ask them to install it.
# If the user doesn't want to install it or there is no dircolors config, then
# setup some basic ls colorings
if [[ -e "$DIRCOLORS_FILE" ]]; then
    if [[ -f /usr/local/bin/gdircolors ]]; then
        eval $(/usr/local/bin/gdircolors -b "$DIRCOLORS_FILE")
    else
        echo "GNU coreutils must be installed"

        while true; do
            read -p "Do you want to install them with Homebrew? (y/n) " yn
            case $yn in
                [Yy]* )
                    brew install coreutils --default-names
                    eval $(/usr/local/bin/gdircolors -b "$DIRCOLORS_FILE")

                    break
                    ;;
                [Nn]* )
                    break
                    ;;
                * )
                    echo "Please answer y or n"
                    ;;
            esac
        done
    fi
else
    export LSCOLORS=gxbxfxdxcxegedabagaced
fi

# Use the GNU ls instead of the builtin OS X version.
if [[ -e /usr/local/bin/gls ]]; then
    alias lla="/usr/local/bin/gls -al --color=auto"
    alias ls="/usr/local/bin/gls --color=auto"
else
    alias lla="ls -al"
fi
