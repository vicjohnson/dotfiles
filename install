#! /usr/bin/env bash

./uninstall

git submodule init
git submodule update

declare -A files

files[~/.bashrc]=bash/.bashrc
files[~/.bash_styles]=bash/.bash_styles
files[~/.bash_prompt]=bash/.bash_prompt
files[~/.bash_aliases]=bash/.bash_aliases
files[~/.bash_welcome]=bash/.bash_welcome
files[~/.bash_osx]=bash/.bash_osx
files[~/.bash_ubuntu]=bash/.bash_ubuntu
files[~/.dircolors]=bash/.dircolors
files[~/.gitconfig]=git/.gitconfig
files[~/.gitprompt]=git/.gitprompt
files[~/.vim]=vim/.vim
files[~/.vimrc]=vim/.vimrc

for f in ${!files[@]}; do
    if [[ -h $f ]] || [[ ! -a $f ]]; then
        ln -sf "$PWD/${files[$f]}" $f
    fi
done

declare -A sublimePath

sublimePath["Darwin"]=~/Library/Application\ Support/Sublime\ Text\ 3/Packages/User/Shell-Unix-Generic.sublime-settings
sublimePath["Linux"]=~/.config/sublime-text-3/Packages/User/Shell-Unix-Generic.sublime-settings
localSublimePath=sublime/Shell-Unix-Generic.sublime-settings

if [[ -h ${sublimePath[$(uname)]} ]] || [[ ! -a ${sublimePath[$(uname)]} ]]; then
    ln -sf "$PWD/$localSublimePath" "${sublimePath[$(uname)]}"
fi